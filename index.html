<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />

  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#020617">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="My Piggy">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no" />

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <style>
    :root{
  --primary: #3b82f6;
  --primary-2: #06b6d4;
  --primary-soft: rgba(59, 130, 246, 0.22);

  --success: #34d399;
  --danger: #fb7185;

  --text-main: rgba(226, 232, 240, 0.98);
  --text-muted: rgba(148, 163, 184, 0.95);
  --text-faint: rgba(148, 163, 184, 0.72);

  --bg-body: #020617;
  --surface: rgba(255,255,255,0.06);
  --surface-2: rgba(255,255,255,0.10);

  --border: rgba(148, 163, 184, 0.16);
  --shadow: 0 22px 60px rgba(0, 0, 0, 0.55);
  --shadow-soft: 0 14px 36px rgba(0, 0, 0, 0.40);

  --ring: 0 0 0 4px rgba(6, 182, 212, 0.22);

  --radius-xl: 2rem;
  --radius-lg: 1.5rem;
  --radius-md: 1rem;
}


    * { -webkit-tap-highlight-color: transparent; }

    body {
  font-family: 'Kanit', sans-serif;
  color: var(--text-main);
  background-color: var(--bg-body);
  background-image:
    radial-gradient(circle at 18% 18%, rgba(59, 130, 246, 0.22) 0%, transparent 42%),
    radial-gradient(circle at 82% 78%, rgba(6, 182, 212, 0.18) 0%, transparent 44%),
    radial-gradient(circle at 50% 120%, rgba(99, 102, 241, 0.14) 0%, transparent 55%),
    linear-gradient(rgba(148, 163, 184, 0.08) 1px, transparent 1px),
    linear-gradient(90deg, rgba(148, 163, 184, 0.08) 1px, transparent 1px),
    linear-gradient(180deg, rgba(2, 6, 23, 0.20), rgba(2, 6, 23, 0.80));
  background-size: auto, auto, auto, 26px 26px, 26px 26px, auto;
  background-position: center, center, center, center, center, center;
  min-height: 100vh;
  overscroll-behavior-y: none;
}


    .glass {
  background: var(--surface);
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
  border: 1px solid var(--border);
  box-shadow: var(--shadow-soft);
  position: relative;
  overflow: hidden;
}
.glass::before{
  content:"";
  position:absolute; inset:-2px;
  background:
    radial-gradient(120px 120px at 18% 22%, rgba(59,130,246,0.18), transparent 55%),
    radial-gradient(120px 120px at 84% 78%, rgba(6,182,212,0.14), transparent 60%);
  pointer-events:none;
  filter: blur(2px);
  opacity: 0.9;
}
.glass::after{
  content:"";
  position:absolute; inset:0;
  border-radius: inherit;
  pointer-events:none;
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,0.10),
    inset 0 0 0 2px rgba(2, 6, 23, 0.35);
}

    .field {
  background: rgba(2, 6, 23, 0.45);
  border: 1px solid rgba(148, 163, 184, 0.18);
  color: var(--text-main);
  transition: all 0.18s ease;
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.05);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}
.field::placeholder { color: rgba(148, 163, 184, 0.55); }
.field:hover { border-color: rgba(59, 130, 246, 0.35); }
.field:focus {
  background: rgba(2, 6, 23, 0.62);
  border-color: rgba(6, 182, 212, 0.55);
  box-shadow: var(--ring);
  outline: none;
}

    .custom-select-trigger { display: flex; justify-content: space-between; align-items: center; cursor: pointer; }

    .custom-options {
  position: absolute; top: 108%; left: 0; right: 0;
  background: rgba(2, 6, 23, 0.88);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border-radius: 1.5rem;
  border: 1px solid rgba(148, 163, 184, 0.18);
  box-shadow: var(--shadow);
  z-index: 999;
  opacity: 0; visibility: hidden;
  transform: translateY(-10px);
  transition: all 0.18s cubic-bezier(0.16, 1, 0.3, 1);
  max-height: 320px;
  overflow-y: auto;
  padding: 0.5rem;
  scrollbar-width: thin;
  scrollbar-color: rgba(148, 163, 184, 0.55) transparent;
}
.custom-options.open { opacity: 1; visibility: visible; transform: translateY(0); }

    .custom-option {
  padding: 0.75rem 0.9rem;
  border-radius: 1rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  transition: background 0.15s ease, transform 0.15s ease;
  color: rgba(226, 232, 240, 0.95);
}
.custom-option:hover { background: rgba(148, 163, 184, 0.10); transform: translateY(-1px); }
.custom-option.selected { background: rgba(6, 182, 212, 0.14); color: rgba(226, 232, 240, 0.98); font-weight: 700; }

    .option-icon {
  width: 2rem; height: 2rem;
  display: flex; align-items: center; justify-content: center;
  border-radius: 0.75rem;
  background: rgba(148, 163, 184, 0.10);
  color: rgba(226, 232, 240, 0.78);
  transition: all 0.15s ease;
  border: 1px solid rgba(148, 163, 184, 0.14);
}
.custom-option.selected .option-icon {
  background: rgba(59, 130, 246, 0.16);
  color: rgba(226, 232, 240, 0.96);
  border-color: rgba(6, 182, 212, 0.22);
  box-shadow: 0 10px 24px rgba(6, 182, 212, 0.12);
}

    .type-neutral { background: rgba(2, 6, 23, 0.04); color: var(--text-muted); border: 1px solid transparent; }
    .type-active-exp {
  background: #ef4444 !important; /* solid red */
  color: rgba(255,255,255,0.98) !important;
  border: 1px solid rgba(255,255,255,0.18) !important;
  box-shadow: 0 14px 30px rgba(239, 68, 68, 0.35) !important;
  backdrop-filter: none !important;
}
    .type-active-inc {
  background: #10b981 !important; /* solid green */
  color: rgba(255,255,255,0.98) !important;
  border: 1px solid rgba(255,255,255,0.18) !important;
  box-shadow: 0 14px 30px rgba(16, 185, 129, 0.35) !important;
  backdrop-filter: none !important;
}

    .tab-active {
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.22), rgba(6, 182, 212, 0.18));
  color: rgba(226, 232, 240, 0.98);
  box-shadow: 0 10px 26px rgba(6, 182, 212, 0.16);
  border: 1px solid rgba(6, 182, 212, 0.22);
}
.tab-inactive { background: transparent; color: rgba(148, 163, 184, 0.90); }

    .btn-primary-grad {
  background: linear-gradient(135deg, var(--primary) 0%, #1d4ed8 55%, var(--primary-2) 130%);
  color: white;
  box-shadow: 0 18px 42px rgba(59, 130, 246, 0.24), 0 10px 28px rgba(6, 182, 212, 0.12);
  border: 1px solid rgba(255,255,255,0.10);
  transition: transform 0.14s ease, filter 0.14s ease, box-shadow 0.14s ease;
}
.btn-primary-grad:hover { filter: brightness(1.04); box-shadow: 0 22px 54px rgba(59, 130, 246, 0.28), 0 14px 38px rgba(6, 182, 212, 0.14); }
.btn-primary-grad:active { transform: scale(0.985); }

    .card-hover { transition: transform 0.16s ease, box-shadow 0.16s ease, border-color 0.16s ease; }
    .card-hover:hover { transform: translateY(-1px); box-shadow: 0 14px 26px rgba(2, 6, 23, 0.08); border-color: rgba(37, 99, 235, 0.16); }

/* ==============================
   FinTech Dark Glass Overrides
   (UI only ‚Äî no functional changes)
   ============================== */
.theme-fintech .text-slate-900{ color: rgba(226,232,240,0.98) !important; }
.theme-fintech .text-slate-800{ color: rgba(226,232,240,0.94) !important; }
.theme-fintech .text-slate-700{ color: rgba(203,213,225,0.92) !important; }
.theme-fintech .text-slate-600{ color: rgba(186,199,214,0.92) !important; }
.theme-fintech .text-slate-500{ color: rgba(148,163,184,0.92) !important; }
.theme-fintech .text-slate-400{ color: rgba(148,163,184,0.78) !important; }
.theme-fintech .text-slate-300{ color: rgba(148,163,184,0.66) !important; }
.theme-fintech .text-slate-200{ color: rgba(148,163,184,0.56) !important; }

.theme-fintech .text-blue-600{ color: rgba(125,211,252,0.95) !important; }
.theme-fintech .text-emerald-600{ color: rgba(110,231,183,0.95) !important; }
.theme-fintech .text-rose-600{ color: rgba(251,113,133,0.95) !important; }
.theme-fintech .text-orange-600{ color: rgba(253,186,116,0.95) !important; }

.theme-fintech .bg-white,
.theme-fintech .bg-white\/92,
.theme-fintech .bg-white\/90,
.theme-fintech .bg-white\/70,
.theme-fintech .bg-white\/60,
.theme-fintech .bg-white\/10{
  background-color: rgba(255,255,255,0.06) !important;
}

.theme-fintech .border-slate-100,
.theme-fintech .border-slate-200,
.theme-fintech .border-slate-200\/60,
.theme-fintech .border-slate-100\/80{
  border-color: rgba(148,163,184,0.14) !important;
}

.theme-fintech .bg-slate-100{ background-color: rgba(148,163,184,0.10) !important; }
.theme-fintech .bg-slate-200{ background-color: rgba(148,163,184,0.12) !important; }

.theme-fintech .bg-blue-50{ background-color: rgba(59,130,246,0.12) !important; }
.theme-fintech .bg-blue-100{ background-color: rgba(59,130,246,0.16) !important; }
.theme-fintech .border-blue-100{ border-color: rgba(6,182,212,0.22) !important; }

.theme-fintech .bg-emerald-100{ background-color: rgba(16,185,129,0.14) !important; }
.theme-fintech .border-emerald-200\/60{ border-color: rgba(16,185,129,0.22) !important; }

.theme-fintech .bg-rose-50{ background-color: rgba(244,63,94,0.12) !important; }
.theme-fintech .bg-rose-100{ background-color: rgba(244,63,94,0.14) !important; }
.theme-fintech .border-rose-100{ border-color: rgba(244,63,94,0.22) !important; }
.theme-fintech .border-rose-200\/60{ border-color: rgba(244,63,94,0.22) !important; }

.theme-fintech .bg-orange-50{ background-color: rgba(249,115,22,0.14) !important; }
.theme-fintech .border-orange-100{ border-color: rgba(249,115,22,0.22) !important; }
.theme-fintech .bg-orange-100{ background-color: rgba(249,115,22,0.16) !important; }
.theme-fintech .border-orange-200\/60{ border-color: rgba(249,115,22,0.24) !important; }

.theme-fintech .shadow-sm{ box-shadow: 0 12px 34px rgba(0,0,0,0.28) !important; }
.theme-fintech .shadow-xl{ box-shadow: 0 22px 60px rgba(0,0,0,0.48) !important; }
.theme-fintech .shadow-2xl{ box-shadow: 0 28px 80px rgba(0,0,0,0.55) !important; }


/* ==================================================
   Sticky Glass Header Tone (darker ‚Äî match Save button)
   UI only ‚Äî no functional changes
   ================================================== */
.theme-fintech .glass.sticky{
  /* darker fintech glass using Save button hues */
  background-color: rgba(2, 6, 23, 0.72);
  background-image: linear-gradient(135deg,
    rgba(59, 130, 246, 0.30) 0%,
    rgba(29, 78, 216, 0.26) 55%,
    rgba(6, 182, 212, 0.24) 130%);
  border-color: rgba(6, 182, 212, 0.30) !important;
  box-shadow:
    0 26px 78px rgba(0,0,0,0.68),
    0 14px 34px rgba(6,182,212,0.14),
    0 10px 26px rgba(59,130,246,0.10),
    inset 0 0 0 1px rgba(255,255,255,0.10);
}

.theme-fintech .glass.sticky::before{
  background:
    radial-gradient(180px 140px at 14% 24%, rgba(59,130,246,0.36), transparent 60%),
    radial-gradient(170px 140px at 86% 80%, rgba(6,182,212,0.30), transparent 64%),
    linear-gradient(90deg, transparent, rgba(255,255,255,0.06), transparent);
  opacity: 0.95;
}

.theme-fintech .glass.sticky::after{
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,0.12),
    inset 0 0 0 2px rgba(2, 6, 23, 0.55),
    inset 0 -18px 40px rgba(2, 6, 23, 0.28),
    0 0 0 1px rgba(6,182,212,0.10);
}

/* Sticky header buttons keep subtle contrast */
.theme-fintech #btnQuickRefresh,
.theme-fintech #btnHistRefresh{
  background: rgba(255,255,255,0.10) !important;
  border-color: rgba(148,163,184,0.18) !important;
}
.theme-fintech #btnQuickRefresh:hover,
.theme-fintech #btnHistRefresh:hover{
  background: rgba(6,182,212,0.14) !important;
  border-color: rgba(6,182,212,0.28) !important;
  color: rgba(226,232,240,0.98) !important;
}

@media (prefers-reduced-motion: reduce){
      * { transition: none !important; animation: none !important; }
    }

    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-5px); }
      100% { transform: translateY(0px); }
    }
    .animate-float { animation: float 3s ease-in-out infinite; }
  
/* === UI override: Expense/Income buttons (inactive = light tone) === */
#btnExp.type-neutral,
#btnInc.type-neutral,
#btnExp:not(.type-active-exp):not(.type-active-inc):not(.type-neutral),
#btnInc:not(.type-active-exp):not(.type-active-inc):not(.type-neutral) {
  background: rgba(255, 255, 255, 0.92) !important;
  color: rgba(15, 23, 42, 0.96) !important;
  border: 1px solid rgba(15, 23, 42, 0.18) !important;
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.72),
    0 16px 34px rgba(2, 6, 23, 0.18) !important;
}

/* Force solid active colors for Expense/Income buttons (no blur) */
#btnExp.type-active-exp, #btnInc.type-active-inc {
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

#btnExp.type-neutral:hover,
#btnInc.type-neutral:hover,
#btnExp:not(.type-active-exp):not(.type-active-inc):not(.type-neutral):hover,
#btnInc:not(.type-active-exp):not(.type-active-inc):not(.type-neutral):hover {
  background: rgba(255, 255, 255, 0.98) !important;
  border-color: rgba(15, 23, 42, 0.26) !important;
  transform: translateY(-1px);
}

#btnExp.type-neutral i,
#btnInc.type-neutral i,
#btnExp:not(.type-active-exp):not(.type-active-inc):not(.type-neutral) i,
#btnInc:not(.type-active-exp):not(.type-active-inc):not(.type-neutral) i {
  color: rgba(2, 6, 23, 0.72) !important;
  opacity: 0.75 !important;
}


/* =========================================================
   INPUT TAB ‚Äî SCROLL & DROPDOWN SAFETY
   - Fix: dropdown menus (custom-options) being clipped by .glass overflow
   - Keep logic intact: CSS only
   ========================================================= */
#tab-input{
  padding-bottom: 10rem; /* extra scroll room so dropdowns won't hit the app edge */
}

/* Allow dropdown panels to escape glass clipping inside Input tab only */
#tab-input .glass{
  overflow: visible;
}

/* Prevent the decorative border layer from spilling when overflow is visible */
#tab-input .glass::before{
  inset: 0;
}

</style>
</head>

<body class="theme-fintech p-4 pb-12 sm:p-6 lg:p-8 flex justify-center">

  <div class="w-full max-w-md space-y-6 relative z-10">

    <div class="glass rounded-[2rem] p-5 sticky top-2 z-50">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 rounded-2xl bg-gradient-to-br from-blue-600 to-cyan-500 flex items-center justify-center text-white shadow-lg shadow-blue-600/20">
            <i class="fa-solid fa-piggy-bank text-lg"></i>
          </div>
          <div>
            <h1 class="text-xl font-bold tracking-tight text-slate-900">My Piggy</h1>
            <p class="text-[11px] font-medium text-slate-400 uppercase tracking-wider">Financial Tracker</p>
          </div>
        </div>

        <button id="btnQuickRefresh" class="w-9 h-9 rounded-full bg-white/70 border border-slate-200 text-slate-500 hover:bg-blue-50 hover:text-blue-600 transition-colors flex items-center justify-center shadow-sm">
          <i class="fa-solid fa-arrows-rotate text-sm"></i>
        </button>
      </div>

      <div class="mt-5 bg-white/60 border border-slate-200/60 p-1.5 rounded-2xl grid grid-cols-3 gap-1 relative">
        <button id="tabBtnDash" class="py-2.5 rounded-xl text-xs font-bold transition-all duration-200 tab-active" onclick="switchTab('dashboard')">Dashboard</button>
        <button id="tabBtnInput" class="py-2.5 rounded-xl text-xs font-bold transition-all duration-200 tab-inactive" onclick="switchTab('input')">Input</button>
        <button id="tabBtnHistory" class="py-2.5 rounded-xl text-xs font-bold transition-all duration-200 tab-inactive" onclick="switchTab('history')">History</button>
      </div>
    </div>

    <!-- ===================== INPUT TAB ===================== -->
    <div id="tab-input" class="space-y-4">
      <div class="glass rounded-[2.5rem] p-6 pt-8 space-y-6 relative">
        <div class="absolute -top-10 -right-10 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl pointer-events-none"></div>

        <div class="grid grid-cols-2 gap-3">
          <div class="space-y-1.5">
            <label class="text-[10px] font-bold text-slate-400 uppercase ml-2">Date</label>
            <div class="relative">
              <input type="date" id="txDate" class="field w-full rounded-2xl px-3 py-2.5 text-sm font-medium text-slate-700 appearance-none text-center">
            </div>
          </div>

          <div class="space-y-1.5 relative">
            <label class="text-[10px] font-bold text-slate-400 uppercase ml-2">User</label>

            <select id="userName" class="hidden" required>
              <option value="" selected disabled>Select User</option>
              <option value="Nine">Nine</option>
              <option value="Bow">Bow</option>
            </select>

            <div id="custom-user-trigger" class="field w-full rounded-2xl px-3 py-2.5 text-sm font-medium text-slate-800 custom-select-trigger" onclick="toggleCustomSelect(event,'user')">
              <span class="flex items-center gap-3">
                <!-- ‚úÖ user-trigger-icon ‡∏™‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏Å‡∏±‡∏ö dashUser-trigger-icon -->
                <span id="user-trigger-icon" class="w-8 h-8 rounded-lg bg-gradient-to-br from-amber-400 via-orange-500 to-rose-500 text-white flex items-center justify-center shadow-sm">
                  <i class="fa-solid fa-user text-sm"></i>
                </span>
                <span id="user-trigger-text" class="text-slate-400">Select User</span>
              </span>
              <i id="user-trigger-arrow" class="fa-solid fa-chevron-down text-slate-300 text-xs transition-transform"></i>
            </div>

            <div id="custom-user-options" class="custom-options"></div>
          </div>
        </div>

        <div class="grid grid-cols-2 gap-3">
          <button onclick="setType('Expense')" id="btnExp" class="type-neutral py-4 rounded-2xl font-bold text-sm transition-all flex flex-col items-center gap-1 group">
            <i class="fa-solid fa-arrow-trend-down text-lg mb-1 opacity-50 group-hover:opacity-100"></i>
            ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢
          </button>
          <button onclick="setType('Income')" id="btnInc" class="type-neutral py-4 rounded-2xl font-bold text-sm transition-all flex flex-col items-center gap-1 group">
            <i class="fa-solid fa-arrow-trend-up text-lg mb-1 opacity-50 group-hover:opacity-100"></i>
            ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö
          </button>
        </div>

        <div class="relative group">
          <div class="absolute left-5 top-1/2 -translate-y-1/2 text-slate-400 text-lg font-light">‡∏ø</div>
          <input type="number" id="amt" inputmode="decimal"
                 class="field w-full p-6 pl-10 rounded-[2rem] text-3xl font-bold text-slate-800 placeholder:text-slate-200 text-center tracking-tight focus:ring-4 focus:ring-blue-100"
                 placeholder="0">
          <p class="text-center text-[10px] text-slate-400 mt-2 font-medium">‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</p>
        </div>

        
        <!-- Payment Method -->
        <div class="space-y-1.5">
          <label class="text-[10px] font-bold text-slate-400 uppercase ml-2">Payment Method</label>

          <!-- hidden select (source of truth) -->
          <select id="payMethod" class="hidden">
            <option value="" disabled selected>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢</option>
            <option value="‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î">‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î</option>
            <option value="‡πÄ‡∏á‡∏¥‡∏ô Digital">‡πÄ‡∏á‡∏¥‡∏ô Digital</option>
          </select>

          <!-- custom trigger (UI only) -->
          <div class="relative">
            <div id="custom-payMethod-trigger" class="field w-full p-4 rounded-2xl text-slate-800 font-medium custom-select-trigger" onclick="toggleCustomSelect(event,'payMethod')">
              <span class="flex items-center gap-3">
                <span id="payMethod-trigger-icon" class="w-8 h-8 rounded-lg bg-gradient-to-br from-amber-400 via-orange-500 to-rose-500 text-white flex items-center justify-center shadow-sm">
                  <i class="fa-solid fa-credit-card text-sm"></i>
                </span>
                <span id="payMethod-trigger-text" class="text-slate-400">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢</span>
              </span>
              <i id="payMethod-trigger-arrow" class="fa-solid fa-chevron-down text-slate-300 text-xs transition-transform"></i>
            </div>
            <div id="custom-payMethod-options" class="custom-options"></div>
          </div>
        </div>

<div class="space-y-3 relative">
          <select id="cate" class="hidden">
            <option value="" disabled selected>Select Category</option>
            <option value="üç± ‡∏≠‡∏≤‡∏´‡∏≤‡∏£/‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°">‡∏≠‡∏≤‡∏´‡∏≤‡∏£ / ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°</option>
            <option value="üöó ‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á">‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á / ‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô</option>
            <option value="üè† ‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å/‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ">‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å / ‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</option>
            <option value="üõçÔ∏è ‡∏ä‡πâ‡∏≠‡∏õ‡∏õ‡∏¥‡πâ‡∏á">‡∏ä‡πâ‡∏≠‡∏õ‡∏õ‡∏¥‡πâ‡∏á / ‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏¥‡∏á</option>

            <!-- ‚úÖ 4 ‡∏´‡∏°‡∏ß‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏° -->
            <option value="üí∞ ‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÅ‡∏ö‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡∏£‡∏≤‡πÑ‡∏ó‡∏¢ THB">‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÅ‡∏ö‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡∏£‡∏≤‡πÑ‡∏ó‡∏¢ THB</option>
            <option value="üíµ ‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÅ‡∏ö‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡∏£‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® USD">‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÅ‡∏ö‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡∏£‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® USD</option>
            <option value="üõ°Ô∏è ‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏∞‡∏™‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå">‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏∞‡∏™‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå</option>
            <option value="ü™ô ‡∏≠‡∏≠‡∏°‡∏ó‡∏≠‡∏á">‡∏≠‡∏≠‡∏°‡∏ó‡∏≠‡∏á</option>

            <option value="üíµ ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö/‡πÇ‡∏ö‡∏ô‡∏±‡∏™">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö / ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô / ‡πÇ‡∏ö‡∏ô‡∏±‡∏™</option>
            <option value="‚öôÔ∏è ‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
          </select>

          <div id="custom-cate-trigger" class="field w-full p-4 rounded-2xl text-slate-800 font-medium custom-select-trigger" onclick="toggleCustomDropdown(event)">
            <span class="flex items-center gap-3">
              <span id="trigger-icon" class="w-8 h-8 rounded-lg bg-gradient-to-br from-amber-400 via-orange-500 to-rose-500 text-white flex items-center justify-center shadow-sm">
                <i class="fa-solid fa-folder-open text-sm drop-shadow-sm"></i>
              </span>
              <span id="trigger-text" class="text-slate-400">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà...</span>
            </span>
            <i class="fa-solid fa-chevron-down text-slate-300 text-xs transition-transform" id="trigger-arrow"></i>
          </div>

          <div id="custom-cate-options" class="custom-options"></div>

          <div class="relative mt-3">
            <input type="text" id="desc" class="field w-full p-4 pl-12 rounded-2xl text-slate-700" placeholder="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ä‡πà‡∏ß‡∏¢‡∏à‡∏≥ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)">
            <i class="fa-regular fa-comment-dots absolute left-5 top-1/2 -translate-y-1/2 text-slate-400"></i>
          </div>
        </div>

        <button onclick="saveData()" id="saveBtn" class="btn btn-primary-grad w-full py-4 rounded-[1.5rem] font-bold text-lg flex items-center justify-center gap-2 mt-4">
          <span>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</span>
          <i class="fa-solid fa-check circle-check"></i>
        </button>
      </div>
    </div>

    <!-- ===================== DASHBOARD TAB ===================== -->
    <div id="tab-dashboard" class="hidden space-y-5">
      <div class="glass rounded-[2rem] p-5 relative z-[60] overflow-visible">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-lg font-bold text-slate-800">Overview</h2>
          <button id="btnRefresh" class="text-xs font-bold text-blue-600 bg-blue-50 border border-blue-100 px-3 py-1.5 rounded-full hover:bg-blue-100 transition-colors">Refresh</button>
        </div>

        <div class="grid grid-cols-2 gap-3">
          <select id="dashUser" class="hidden">
            <option value="All" selected>All Users</option>
            <option value="Nine">Nine</option>
            <option value="Bow">Bow</option>
          </select>

          <div class="relative">
            <div id="custom-dashUser-trigger" class="field w-full rounded-xl px-3 py-2 text-xs font-bold text-slate-700 custom-select-trigger" onclick="toggleCustomSelect(event,'dashUser')">
              <span class="flex items-center gap-2">
                <span id="dashUser-trigger-icon" class="w-7 h-7 rounded-lg bg-slate-100 text-slate-400 flex items-center justify-center border border-slate-200">
                  <i class="fa-solid fa-users text-xs"></i>
                </span>
                <span id="dashUser-trigger-text" class="text-slate-900 font-bold">All Users</span>
              </span>
              <i id="dashUser-trigger-arrow" class="fa-solid fa-chevron-down text-slate-300 text-[10px] transition-transform"></i>
            </div>
            <div id="custom-dashUser-options" class="custom-options"></div>
          </div>

          <select id="dashYear" class="field w-full rounded-xl px-3 py-2 text-xs font-bold text-slate-700"></select>
        </div>
      </div>

      <div class="grid grid-cols-1 gap-4">
        <div class="rounded-[2.5rem] p-6 text-white relative overflow-hidden shadow-xl shadow-blue-500/20 isolation-isolate z-0"
             style="background: linear-gradient(120deg, #2563eb, #06b6d4);">
          <div class="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full blur-2xl -mr-10 -mt-10 pointer-events-none"></div>
          <i class="fa-solid fa-rocket absolute top-4 right-5 text-7xl text-white/10 rotate-45 pointer-events-none"></i>

                    <div class="flex items-start justify-between gap-4">
            <div class="min-w-0">
              <p class="text-blue-100 text-xs font-medium uppercase tracking-wide mb-1">Net Balance (Year)</p>
              <h2 id="kpiNet" class="text-4xl font-bold tracking-tight mb-4">‡∏ø 0</h2>
              <div class="flex items-center gap-4 text-xs font-medium text-blue-50 bg-white/10 p-2 rounded-xl backdrop-blur-sm inline-flex border border-white/10">
                <span>Income - Expense</span>
              </div>
            </div>

            <!-- Breakdown: Cash / Digital -->
            <div class="shrink-0 w-[44%] max-w-[175px]">
              <div class="bg-white/10 p-3 rounded-[1.25rem] backdrop-blur-sm border border-white/10">
                <p class="text-[10px] text-blue-100/90 font-bold uppercase tracking-wide">Breakdown</p>
                <div class="mt-2 space-y-2">
                  <div class="flex items-center justify-between text-xs font-bold">
                    <span class="text-blue-50/90">‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î</span>
                    <span id="kpiNetCash" class="text-white whitespace-nowrap">‡∏ø 0</span>
                  </div>
                  <div class="h-px bg-white/10"></div>
                  <div class="flex items-center justify-between text-xs font-bold">
                    <span class="text-blue-50/90">‡πÄ‡∏á‡∏¥‡∏ô Digital</span>
                    <span id="kpiNetDigital" class="text-white whitespace-nowrap">‡∏ø 0</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="grid grid-cols-2 gap-3">
          <div class="bg-white/90 backdrop-blur p-4 rounded-[1.5rem] border border-slate-100 shadow-sm card-hover">
            <div class="w-8 h-8 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center text-xs mb-2 border border-emerald-200/60">
              <i class="fa-solid fa-arrow-trend-up"></i>
            </div>
            <p class="text-[10px] text-slate-400 uppercase font-bold">Income</p>
            <h3 id="kpiIncome" class="text-lg font-bold text-emerald-600">‡∏ø 0</h3>
          </div>
          <div class="bg-white/90 backdrop-blur p-4 rounded-[1.5rem] border border-slate-100 shadow-sm card-hover">
            <div class="w-8 h-8 rounded-full bg-rose-100 text-rose-600 flex items-center justify-center text-xs mb-2 border border-rose-200/60">
              <i class="fa-solid fa-arrow-trend-down"></i>
            </div>
            <p class="text-[10px] text-slate-400 uppercase font-bold">Std. Expenses</p>
            <h3 id="kpiExpense" class="text-lg font-bold text-rose-600">‡∏ø 0</h3>
          </div>
        </div>

        <div class="grid grid-cols-2 gap-3">
          <div class="bg-white/90 backdrop-blur p-4 rounded-[1.5rem] border border-slate-100 shadow-sm card-hover">
            <div class="w-8 h-8 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center text-xs mb-2 border border-emerald-200/60">
              <i class="fa-solid fa-sack-dollar"></i>
            </div>
            <p class="text-[10px] text-slate-400 uppercase font-bold">Saving Expense</p>
            <h3 id="kpiSavings" class="text-lg font-bold text-emerald-600">‡∏ø 0</h3>
          </div>

          <div class="bg-white/90 backdrop-blur p-4 rounded-[1.5rem] border border-slate-100 shadow-sm card-hover">
            <div class="w-8 h-8 rounded-full bg-slate-100 text-slate-700 flex items-center justify-center text-xs mb-2 border border-slate-200/70">
              <i class="fa-solid fa-scale-balanced"></i>
            </div>
            <p class="text-[10px] text-slate-400 uppercase font-bold">Total Balance</p>
            <h3 id="kpiOverallBalance" class="text-lg font-bold text-slate-900">‡∏ø 0</h3>
          </div>
        </div>
      </div>

      <div class="glass rounded-[2.5rem] p-5 space-y-6">
        <div>
          <div class="flex items-center justify-between mb-3">
            <h3 class="font-bold text-slate-800 text-sm">Monthly Breakdown</h3>
            <span id="rangeHint" class="text-[10px] text-slate-500 bg-white/70 border border-slate-200 px-2 py-1 rounded-lg">-</span>
          </div>
          <div class="h-[200px] w-full">
            <canvas id="barStack"></canvas>
          </div>
        </div>

        <div class="border-t border-slate-100/80 pt-5">
          <div class="flex items-center justify-between mb-3">
            <div class="flex items-center gap-2">
              <h3 class="font-bold text-slate-800 text-sm">Savings Trend</h3>
              <span id="trendEmoji" class="text-base"></span>
            </div>

            <button onclick="openTargetModal()" class="flex items-center gap-1.5 bg-orange-50 text-orange-600 px-2.5 py-1 rounded-lg text-[10px] font-bold border border-orange-100 hover:bg-orange-100 transition-colors">
              <i class="fa-solid fa-crosshairs"></i> Set Goal
            </button>
          </div>
          <div class="h-[180px] w-full">
            <canvas id="lineChart"></canvas>
          </div>
        </div>

        <!-- ‚úÖ Expense By Category: ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà "‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà" ‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏° -->
        <div class="border-t border-slate-100/80 pt-5">
          <div class="flex items-center justify-between mb-3">
            <h3 class="font-bold text-slate-800 text-sm">Expense By Category</h3>
            <span class="text-[10px] text-slate-400">% Share</span>
          </div>
          <div class="h-[220px] w-full relative">
            <canvas id="donutChart"></canvas>
          </div>
        </div>

        <!-- ‚úÖ Donut ‡πÉ‡∏´‡∏°‡πà: ‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ä‡∏ô‡∏¥‡∏î -->
        <div class="border-t border-slate-100/80 pt-5">
          <div class="flex items-center justify-between mb-3">
            <h3 class="font-bold text-slate-800 text-sm">Savings By Type</h3>
            <span class="text-[10px] text-slate-400">% Share</span>
          </div>
          <div class="h-[220px] w-full relative">
            <canvas id="savingsDonutChart"></canvas>
          </div>
        </div>

      </div>
    </div>

    <!-- ===================== HISTORY TAB ===================== -->
    <div id="tab-history" class="hidden space-y-5">
      <div class="glass rounded-[2rem] p-5 sticky top-24 z-40" style="overflow: visible;">
        <div class="flex items-center justify-between mb-3">
          <h2 class="text-lg font-bold text-slate-800">Transactions</h2>
          <button id="btnHistRefresh" class="w-9 h-9 rounded-full bg-white/70 border border-slate-200 hover:bg-blue-50 text-slate-500 hover:text-blue-600 transition-colors flex items-center justify-center shadow-sm">
            <i class="fa-solid fa-rotate-right text-xs"></i>
          </button>
        </div>

        <div class="flex gap-2">
          <select id="histUser" class="hidden">
            <option value="All" selected>All Users</option>
            <option value="Nine">Nine</option>
            <option value="Bow">Bow</option>
          </select>

          <div class="relative flex-1">
            <div id="custom-histUser-trigger" class="field w-full rounded-xl px-2 py-2 text-xs font-bold text-slate-700 text-center custom-select-trigger" onclick="toggleCustomSelect(event,'histUser')">
              <span class="flex items-center gap-2">
                <span id="histUser-trigger-icon" class="w-7 h-7 rounded-lg bg-slate-100 text-slate-400 flex items-center justify-center border border-slate-200">
                  <i class="fa-regular fa-user text-xs"></i>
                </span>
                <span id="histUser-trigger-text" class="text-slate-900 font-bold">All Users</span>
              </span>
              <i id="histUser-trigger-arrow" class="fa-solid fa-chevron-down text-slate-300 text-[10px] transition-transform"></i>
            </div>
            <div id="custom-histUser-options" class="custom-options"></div>
          </div>

          <select id="histYear" class="field flex-1 rounded-xl px-2 py-2 text-xs font-bold text-slate-700 text-center"></select>
        </div>
      </div>

      <div id="history-list" class="space-y-3 pb-10 px-1"></div>
    </div>

  </div>

  <div id="loadingOverlay" class="fixed inset-0 z-[9999] hidden flex items-center justify-center">
    <div class="absolute inset-0 bg-slate-900/20 backdrop-blur-sm"></div>
    <div class="bg-white/90 backdrop-blur-xl p-8 rounded-[2rem] shadow-2xl flex flex-col items-center relative z-10 animate-float border border-white/60">
      <div class="w-16 h-16 mb-4 relative">
        <div class="absolute inset-0 rounded-full border-4 border-slate-100"></div>
        <div class="absolute inset-0 rounded-full border-4 border-blue-600 border-t-transparent animate-spin"></div>
        <i class="fa-solid fa-wallet absolute inset-0 m-auto w-fit h-fit text-blue-600 text-xl"></i>
      </div>
      <h3 id="loadingTitle" class="font-bold text-slate-900 text-lg">Processing</h3>
      <p id="loadingSub" class="text-xs text-slate-500 font-medium mt-1">Please wait...</p>
    </div>
  </div>

  <div id="targetModal" class="fixed inset-0 z-[10000] hidden flex items-center justify-center">
    <div class="absolute inset-0 bg-slate-900/30 backdrop-blur-sm" onclick="closeTargetModal()"></div>
    <div class="bg-white w-[85%] max-w-sm p-6 rounded-[2rem] shadow-2xl relative z-10 transform transition-all duration-300 scale-95 opacity-0 border border-white/70" id="targetModalContent">
      <div class="flex justify-between items-center mb-5">
        <div class="flex items-center gap-2">
          <div class="w-8 h-8 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center border border-orange-200/60">
            <i class="fa-solid fa-bullseye text-sm"></i>
          </div>
          <h3 class="font-bold text-slate-900 text-lg">Set Goals</h3>
        </div>
        <button onclick="closeTargetModal()" class="w-9 h-9 rounded-full bg-slate-100 text-slate-500 hover:bg-slate-200 flex items-center justify-center border border-slate-200">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>

      <p class="text-xs text-slate-500 mb-4">‡∏£‡∏∞‡∏ö‡∏∏‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (Minimum Saving)</p>

      <div class="space-y-4">
        <div>
          <label class="block text-xs font-bold text-slate-600 mb-1 ml-2">Bow's Target</label>
          <div class="relative">
            <span class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 text-xs">‡∏ø</span>
            <input type="number" id="targetBowInput" class="field w-full rounded-2xl pl-8 pr-4 py-3 text-sm font-bold text-slate-800" placeholder="0">
          </div>
        </div>
        <div>
          <label class="block text-xs font-bold text-slate-600 mb-1 ml-2">Nine's Target</label>
          <div class="relative">
            <span class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 text-xs">‡∏ø</span>
            <input type="number" id="targetNineInput" class="field w-full rounded-2xl pl-8 pr-4 py-3 text-sm font-bold text-slate-800" placeholder="0">
          </div>
        </div>
      </div>

      <button onclick="saveTargets()" class="btn btn-primary-grad w-full py-3 rounded-xl font-bold text-sm mt-6 shadow-lg shadow-blue-500/30">
        Save Goals
      </button>
    </div>
  </div>

  <script>
    // ===========================================
    // CONFIG & UTILS
    // ===========================================
    const API_URL = 'https://script.google.com/macros/s/AKfycbw93WqGQKvqsTY_0BEYrsYThJwtOMpwJ-jOl3Rpf8dGkWkf3YxzVlniBmuLRTylM_Ac0Q/exec';

    // ‚úÖ Savings categories (‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏≠‡∏á donut)
    const SAVINGS_CATEGORIES = [
      "‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÅ‡∏ö‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡∏£‡∏≤‡πÑ‡∏ó‡∏¢ THB",
      "‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÅ‡∏ö‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡∏£‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® USD",
      "‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏∞‡∏™‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå",
      "‡∏≠‡∏≠‡∏°‡∏ó‡∏≠‡∏á"
    ];

function _expensePinkToRedStops() {
  return [
    '#FB7185', // Rose-400: (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà ‡πÄ‡∏Ç‡πâ‡∏°‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°‡∏ô‡∏¥‡∏î‡∏ô‡∏∂‡∏á)
    '#F43F5E', // Rose-500
    '#E11D48', // Rose-600
    '#BE123C', // Rose-700
    '#9F1239', // Rose-800
    '#881337', // Rose-900
    '#7F1D1D', // Red-900: (‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÇ‡∏ó‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏î‡∏á‡πÄ‡∏Ç‡πâ‡∏°)
    '#450A0A', // Red-950: (‡πÅ‡∏î‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏´‡∏°‡∏π)
    '#360808', // Deep Red: (‡∏Å‡∏î‡πÉ‡∏´‡πâ‡∏°‡∏∑‡∏î‡∏•‡∏á‡∏≠‡∏µ‡∏Å)
    '#200303'  // Almost Black: (‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡∏î‡∏≥)
  ];
}

// ‚úÖ Savings: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ü‡πâ‡∏≤‡∏™‡∏î (Sky-400) ‡πÑ‡∏•‡πà‡πÑ‡∏õ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡∏•‡∏∂‡∏Å
function _savingsLightBlueToDeepStops() {
  return [
    '#38BDF8', // Sky-400: (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà ‡πÑ‡∏°‡πà‡∏™‡∏ß‡πà‡∏≤‡∏á‡∏à‡πâ‡∏≤‡∏à‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ)
    '#0EA5E9', // Sky-500
    '#0284C7', // Sky-600
    '#0369A1', // Sky-700
    '#1D4ED8', // Blue-700: (‡∏Ç‡πâ‡∏≤‡∏°‡∏°‡∏≤‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î)
    '#1E40AF', // Blue-800
    '#1E3A8A', // Blue-900
    '#172554', // Blue-950: (‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡∏£‡∏°‡∏ó‡πà‡∏≤)
    '#0F172A', // Slate-900: (‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏ó‡∏≤‡πÄ‡∏Ç‡πâ‡∏°)
    '#020617'  // Slate-950: (‡∏î‡∏≥‡∏≠‡∏°‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡∏•‡∏∂‡∏Å‡∏™‡∏∏‡∏î)
  ];
}

    function isSavingsCategory(cat) {
      const s = String(cat || '');
      return SAVINGS_CATEGORIES.some(k => s.includes(k));
    }

    const CATEGORIES = [
      { val: "üç± ‡∏≠‡∏≤‡∏´‡∏≤‡∏£/‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°", label: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£ / ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°", icon: "fa-utensils" },
      { val: "üöó ‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á", label: "‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á / ‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô", icon: "fa-gas-pump" },
      { val: "üè† ‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å/‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ", label: "‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å / ‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ", icon: "fa-house-chimney" },
      { val: "üõçÔ∏è ‡∏ä‡πâ‡∏≠‡∏õ‡∏õ‡∏¥‡πâ‡∏á", label: "‡∏ä‡πâ‡∏≠‡∏õ‡∏õ‡∏¥‡πâ‡∏á / ‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏¥‡∏á", icon: "fa-bag-shopping" },

      { val: "üí∞ ‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÅ‡∏ö‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡∏£‡∏≤‡πÑ‡∏ó‡∏¢ THB",           label: "‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÅ‡∏ö‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡∏£‡∏≤‡πÑ‡∏ó‡∏¢ THB",           icon: "fa-piggy-bank" },
      { val: "üíµ ‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÅ‡∏ö‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡∏£‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® USD",   label: "‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÅ‡∏ö‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡∏£‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® USD",   icon: "fa-dollar-sign" },
      { val: "üõ°Ô∏è ‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏∞‡∏™‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå",        label: "‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏∞‡∏™‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå",        icon: "fa-shield-halved" },
      { val: "ü™ô ‡∏≠‡∏≠‡∏°‡∏ó‡∏≠‡∏á",                              label: "‡∏≠‡∏≠‡∏°‡∏ó‡∏≠‡∏á",                              icon: "fa-coins" },

      { val: "üíµ ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö/‡πÇ‡∏ö‡∏ô‡∏±‡∏™", label: "‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö / ‡πÇ‡∏ö‡∏ô‡∏±‡∏™", icon: "fa-money-bill-wave" },
      { val: "‚öôÔ∏è ‡∏≠‡∏∑‡πà‡∏ô‡πÜ", label: "‡∏≠‡∏∑‡πà‡∏ô‡πÜ", icon: "fa-layer-group" }
    ];

    // NO EMOJI: User lists
    const USER_LIST = [
      { val: "Nine", label: "Nine", icon: "fa-user" },
      { val: "Bow",  label: "Bow",  icon: "fa-user" }
    ];
    const DASH_USER_LIST = [
      { val: "All",  label: "All Users", icon: "fa-users" },
      { val: "Nine", label: "Nine",      icon: "fa-user" },
      { val: "Bow",  label: "Bow",       icon: "fa-user" }
    ];
    const HIST_USER_LIST = [
      { val: "All",  label: "All Users", icon: "fa-users" },
      { val: "Nine", label: "Nine",      icon: "fa-user" },
      { val: "Bow",  label: "Bow",       icon: "fa-user" }
    ];

    const PAY_METHOD_LIST = [
      { val: "‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î",      label: "‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î",      icon: "fa-coins" },
      { val: "‡πÄ‡∏á‡∏¥‡∏ô Digital", label: "‡πÄ‡∏á‡∏¥‡∏ô Digital", icon: "fa-mobile-screen" }
    ];


    async function apiCall(action, params) {
      const body = new URLSearchParams();
      body.append('action', action);
      const p = params || {};
      Object.keys(p).forEach(k => body.append(k, p[k] == null ? '' : String(p[k])));
      const resp = await fetch(API_URL, { method: 'POST', body });
      const text = await resp.text();
      let json;
      try { json = JSON.parse(text); }
      catch (e) { throw new Error('API ‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà JSON: ' + text.slice(0, 200)); }
      return json;
    }

    let currentType = '';
    let barChart = null;
    let lineChart = null;
    let donutChart = null;
    let savingsDonutChart = null;

    const MONTH_LABELS = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
    let __loadingCount = 0;

    // --- TARGET LOGIC ---
    let targetNine = 0;
    let targetBow = 0;

    function loadTargets() {
      targetNine = parseFloat(localStorage.getItem('myPiggy_targetNine')) || 0;
      targetBow  = parseFloat(localStorage.getItem('myPiggy_targetBow'))  || 0;
    }

    function openTargetModal() {
      loadTargets();
      document.getElementById('targetNineInput').value = targetNine || '';
      document.getElementById('targetBowInput').value  = targetBow  || '';
      const modal = document.getElementById('targetModal');
      const content = document.getElementById('targetModalContent');
      modal.classList.remove('hidden');
      setTimeout(() => {
        content.classList.remove('scale-95', 'opacity-0');
        content.classList.add('scale-100', 'opacity-100');
      }, 10);
    }

    function closeTargetModal() {
      const modal = document.getElementById('targetModal');
      const content = document.getElementById('targetModalContent');
      content.classList.remove('scale-100', 'opacity-100');
      content.classList.add('scale-95', 'opacity-0');
      setTimeout(() => { modal.classList.add('hidden'); }, 200);
    }

    function saveTargets() {
      const n = parseFloat(document.getElementById('targetNineInput').value) || 0;
      const b = parseFloat(document.getElementById('targetBowInput').value)  || 0;
      localStorage.setItem('myPiggy_targetNine', n);
      localStorage.setItem('myPiggy_targetBow', b);
      targetNine = n;
      targetBow  = b;
      closeTargetModal();
      if (!document.getElementById('tab-dashboard').classList.contains('hidden')) refreshDashboard();
    }

    // ===========================================
    // MAIN FLOW
    // ===========================================
    window.onload = () => {
      const __runner = document.getElementById('inputRunner');
      if (__runner){
        __runner.addEventListener('animationend', () => { __runner.classList.remove('is-running'); });
      }


      bindGlobalRefresh();
      initDateDefaultToday();
      initYearSelector('dashYear');
      initYearSelector('histYear');
      bindDashboardControls();
      bindHistoryControls();
      initCustomDropdown();
      initUserSelectDropdowns();
      loadTargets();

      refreshDashboard();
      resetTypeSelection();
      resetUserSelection();
      switchTab('dashboard');
    };

    // ===========================================
    // CATEGORY DROPDOWN
    // ===========================================
    function initCustomDropdown() {
      const container = document.getElementById('custom-cate-options');
      container.innerHTML = '';
      CATEGORIES.forEach(cat => {
        const div = document.createElement('div');
        div.className = 'custom-option';
        div.onclick = () => selectCustomOption(cat.val, cat.label, cat.icon);
        div.innerHTML = `
          <div class="option-icon"><i class="fa-solid ${cat.icon}"></i></div>
          <span class="font-medium text-sm">${cat.label}</span>
        `;
        container.appendChild(div);
      });
    }

    function toggleCustomDropdown(e) {
      e.stopPropagation();
      closeAllCustomSelects();
      const opts = document.getElementById('custom-cate-options');
      const arrow = document.getElementById('trigger-arrow');
      opts.classList.toggle('open');
      arrow.style.transform = opts.classList.contains('open') ? 'rotate(180deg)' : 'rotate(0deg)';
    }

    function selectCustomOption(value, label, iconClass) {
      document.getElementById('cate').value = value;
      const iconEl = document.getElementById('trigger-icon');
      const textEl = document.getElementById('trigger-text');
      iconEl.innerHTML = `<i class="fa-solid ${iconClass} text-blue-600"></i>`;
      iconEl.className = "w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center border border-blue-100";
      textEl.innerText = label;
      textEl.className = "text-slate-900 font-bold";
      document.querySelectorAll('#custom-cate-options .custom-option').forEach(el => el.classList.remove('selected'));
      document.getElementById('custom-cate-options').classList.remove('open');
      document.getElementById('trigger-arrow').style.transform = 'rotate(0deg)';
    }

    function resetCustomDropdown() {
      document.getElementById('cate').value = "";
      document.getElementById('trigger-icon').innerHTML = `<i class="fa-solid fa-folder-open text-sm drop-shadow-sm"></i>`;
      document.getElementById('trigger-icon').className = "w-8 h-8 rounded-lg bg-gradient-to-br from-amber-400 via-orange-500 to-rose-500 text-white flex items-center justify-center shadow-sm";
      document.getElementById('trigger-text').innerText = "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà...";
      document.getElementById('trigger-text').className = "text-slate-400";
    }

    // ===========================================
    // USER/DASH/HIST CUSTOM SELECTS
    // ===========================================
    const __customSelectRegistry = {
      user: {
        selectId: 'userName',
        triggerId: 'custom-user-trigger',
        optionsId: 'custom-user-options',
        iconId: 'user-trigger-icon',
        textId: 'user-trigger-text',
        arrowId: 'user-trigger-arrow',
        items: USER_LIST,
        placeholder: 'Select User',
        placeholderIcon: 'fa-user'
      },
      dashUser: {
        selectId: 'dashUser',
        triggerId: 'custom-dashUser-trigger',
        optionsId: 'custom-dashUser-options',
        iconId: 'dashUser-trigger-icon',
        textId: 'dashUser-trigger-text',
        arrowId: 'dashUser-trigger-arrow',
        items: DASH_USER_LIST,
        placeholder: 'All Users',
        placeholderIcon: 'fa-users'
      },
      histUser: {
        selectId: 'histUser',
        triggerId: 'custom-histUser-trigger',
        optionsId: 'custom-histUser-options',
        iconId: 'histUser-trigger-icon',
        textId: 'histUser-trigger-text',
        arrowId: 'histUser-trigger-arrow',
        items: HIST_USER_LIST,
        placeholder: 'All Users',
        placeholderIcon: 'fa-users'
      },
      payMethod: {
        selectId: 'payMethod',
        triggerId: 'custom-payMethod-trigger',
        optionsId: 'custom-payMethod-options',
        iconId: 'payMethod-trigger-icon',
        textId: 'payMethod-trigger-text',
        arrowId: 'payMethod-trigger-arrow',
        items: PAY_METHOD_LIST,
        placeholder: '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢',
        placeholderIcon: 'fa-credit-card'
      }
    };

    function initUserSelectDropdowns(){
      Object.keys(__customSelectRegistry).forEach(key => buildCustomSelect(key));

      document.addEventListener('click', (e) => {
        const cateTrigger = document.getElementById('custom-cate-trigger');
        const cateOptions = document.getElementById('custom-cate-options');
        if (cateTrigger && cateOptions && !cateTrigger.contains(e.target) && !cateOptions.contains(e.target)) {
          cateOptions.classList.remove('open');
          const a = document.getElementById('trigger-arrow');
          if (a) a.style.transform = 'rotate(0deg)';
        }
        closeAllCustomSelects();
      });

      ['user','dashUser','histUser','payMethod'].forEach(key=>{
        const cfg = __customSelectRegistry[key];
        const sel = document.getElementById(cfg.selectId);
        if(sel){
          sel.addEventListener('change', () => syncCustomSelectUI(key));
          syncCustomSelectUI(key);
        }
      });
    }

    function buildCustomSelect(key){
      const cfg = __customSelectRegistry[key];
      const sel = document.getElementById(cfg.selectId);
      const optionsBox = document.getElementById(cfg.optionsId);
      if(!sel || !optionsBox) return;

      optionsBox.innerHTML = '';
      cfg.items.forEach(it=>{
        const div = document.createElement('div');
        div.className = 'custom-option';
        div.onclick = (ev) => {
          ev.stopPropagation();
          sel.value = it.val;
          sel.dispatchEvent(new Event('change', { bubbles: true }));
          closeCustomSelect(key);
          syncCustomSelectUI(key);
        };
        div.innerHTML = `
          <div class="option-icon"><i class="fa-solid ${it.icon}"></i></div>
          <span class="font-medium text-sm">${escapeHtml(it.label)}</span>
        `;
        optionsBox.appendChild(div);
      });
      syncCustomSelectUI(key);
    }

    function toggleCustomSelect(e, key){
      e.stopPropagation();
      const cateOptions = document.getElementById('custom-cate-options');
      if (cateOptions) {
        cateOptions.classList.remove('open');
        const a = document.getElementById('trigger-arrow');
        if (a) a.style.transform = 'rotate(0deg)';
      }
      Object.keys(__customSelectRegistry).forEach(k => { if(k !== key) closeCustomSelect(k); });

      const cfg = __customSelectRegistry[key];
      const box = document.getElementById(cfg.optionsId);
      const arrow = document.getElementById(cfg.arrowId);
      if(!box || !arrow) return;

      box.classList.toggle('open');
      arrow.style.transform = box.classList.contains('open') ? 'rotate(180deg)' : 'rotate(0deg)';
    }

    function closeCustomSelect(key){
      const cfg = __customSelectRegistry[key];
      const box = document.getElementById(cfg.optionsId);
      const arrow = document.getElementById(cfg.arrowId);
      if(box) box.classList.remove('open');
      if(arrow) arrow.style.transform = 'rotate(0deg)';
    }

    function closeAllCustomSelects(){
      Object.keys(__customSelectRegistry).forEach(k => closeCustomSelect(k));
    }

    function syncCustomSelectUI(key){
      const cfg = __customSelectRegistry[key];
      const sel = document.getElementById(cfg.selectId);
      const iconEl = document.getElementById(cfg.iconId);
      const textEl = document.getElementById(cfg.textId);
      const optionsBox = document.getElementById(cfg.optionsId);
      if(!sel || !iconEl || !textEl) return;

      const val = sel.value || '';
      const found = cfg.items.find(x => x.val === val);

      if(optionsBox){
        const nodes = optionsBox.querySelectorAll('.custom-option');
        nodes.forEach((n) => n.classList.remove('selected'));
        if(found){
          const idx = cfg.items.findIndex(x => x.val === val);
          if(idx >= 0 && nodes[idx]) nodes[idx].classList.add('selected');
        }
      }

      if(!val || !found){
        // UI only: keep Payment Method icon in the same orange tone as Category trigger icon
        if(key === 'payMethod' || key === 'user'){
          iconEl.innerHTML = `<i class="fa-solid ${cfg.placeholderIcon} text-sm drop-shadow-sm"></i>`;
          iconEl.className = "w-8 h-8 rounded-lg bg-gradient-to-br from-amber-400 via-orange-500 to-rose-500 text-white flex items-center justify-center shadow-sm";
          textEl.textContent = cfg.placeholder;
          textEl.className = "text-slate-400";
          return;
        }

        iconEl.innerHTML = `<i class="fa-solid ${cfg.placeholderIcon} text-sm"></i>`;
        iconEl.className = (key === 'dashUser' || key === 'histUser')
          ? "w-7 h-7 rounded-lg bg-slate-100 text-slate-400 flex items-center justify-center border border-slate-200"
          : "w-8 h-8 rounded-lg bg-slate-100 text-slate-400 flex items-center justify-center border border-slate-200";
        textEl.textContent = cfg.placeholder;
        textEl.className = "text-slate-400";
        return;
      }

      // UI only: keep Payment Method/User icon orange when NOT selected, but match Category select effect when selected
      if(key === 'payMethod' || key === 'user'){
        // Selected state -> turn blue (same behavior as Category trigger icon)
        iconEl.innerHTML = `<i class="fa-solid ${found.icon} text-blue-600"></i>`;
        iconEl.className = "w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center border border-blue-100";
      } else {
        iconEl.innerHTML = `<i class="fa-solid ${found.icon} text-blue-600"></i>`;
        iconEl.className = (key === 'dashUser' || key === 'histUser')
          ? "w-7 h-7 rounded-lg bg-blue-50 flex items-center justify-center border border-blue-100"
          : "w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center border border-blue-100";
      }
      textEl.textContent = found.label;
      textEl.className = "text-slate-900 font-bold";
    }

    // ===========================================
    // Loading & Utils
    // ===========================================
    function showLoading(title, sub) {
      __loadingCount++;
      const o = document.getElementById('loadingOverlay');
      const t = document.getElementById('loadingTitle');
      const s = document.getElementById('loadingSub');
      if (t) t.textContent = title || 'Loading‚Ä¶';
      if (s) s.textContent = sub || 'Please wait';
      if (o) { o.classList.remove('hidden'); document.body.style.overflow = 'hidden'; }
    }

    function hideLoading() {
      __loadingCount = Math.max(0, __loadingCount - 1);
      if (__loadingCount > 0) return;
      const o = document.getElementById('loadingOverlay');
      if (o) { o.classList.add('hidden'); document.body.style.overflow = ''; }
    }

    function ymdLocal(d) {
      const yyyy = d.getFullYear();
      const mm = String(d.getMonth() + 1).padStart(2, '0');
      const dd = String(d.getDate()).padStart(2, '0');
      return `${yyyy}-${mm}-${dd}`;
    }

    function initDateDefaultToday() {
      const el = document.getElementById('txDate');
      if (el && !el.value) el.value = ymdLocal(new Date());
    }

    function initYearSelector(selectId){
      const sel = document.getElementById(selectId);
      if (!sel) return;
      const now = new Date();
      const currentYear = now.getFullYear();
      const start = currentYear - 5;
      const end = currentYear + 1;
      sel.innerHTML = '';
      for (let y = end; y >= start; y--) {
        const opt = document.createElement('option');
        opt.value = String(y);
        opt.textContent = String(y);
        sel.appendChild(opt);
      }
      sel.value = String(currentYear);
    }

    function bindGlobalRefresh(){
      document.getElementById('btnQuickRefresh').addEventListener('click', () => { refreshDashboard(); try { resetInputs(); } catch(e) {} });
    }

    function playInputRunner(){
      const el = document.getElementById('inputRunner');
      if (!el) return;

      // Center the runner inside the Input tab area (UI only)
      const tab = document.getElementById('tab-input');
      if (tab){
        const r = tab.getBoundingClientRect();
        el.style.left = (r.left + (r.width / 2)) + 'px';
        el.style.top  = (r.top  + (r.height / 2)) + 'px';
        el.style.bottom = 'auto';
      } else {
        el.style.left = '50%';
        el.style.top  = '50%';
        el.style.bottom = 'auto';
      }

      el.classList.remove('is-running');
      // force reflow to restart animation
      void el.offsetWidth;
      el.classList.add('is-running');
    }


    let __activeTab = 'input';
    let __historyCache = [];

    function setTabBtnState(btn, isActive){
      if (!btn) return;
      btn.classList.toggle('tab-active', isActive);
      btn.classList.toggle('tab-inactive', !isActive);
    }

    function switchTab(tab) {
      __activeTab = tab;
      const input = document.getElementById('tab-input');
      const dash = document.getElementById('tab-dashboard');
      const hist = document.getElementById('tab-history');
      const bInput = document.getElementById('tabBtnInput');
      const bDash = document.getElementById('tabBtnDash');
      const bHist = document.getElementById('tabBtnHistory');

      if (input) input.classList.toggle('hidden', tab !== 'input');
      if (dash)  dash.classList.toggle('hidden', tab !== 'dashboard');
      if (hist)  hist.classList.toggle('hidden', tab !== 'history');

      setTabBtnState(bInput, tab === 'input');
      setTabBtnState(bDash, tab === 'dashboard');
      setTabBtnState(bHist, tab === 'history');

      if (tab === 'dashboard') refreshDashboard();
      if (tab === 'history') refreshHistory();
      if (tab === 'input') playInputRunner();
    }

    function bindDashboardControls() {
      document.getElementById('dashUser').addEventListener('change', refreshDashboard);
      document.getElementById('dashYear').addEventListener('change', refreshDashboard);
      document.getElementById('btnRefresh').addEventListener('click', refreshDashboard);
    }

    function bindHistoryControls(){
      const hu = document.getElementById('histUser');
      const hy = document.getElementById('histYear');
      const br = document.getElementById('btnHistRefresh');
      if (hu) hu.addEventListener('change', refreshHistory);
      if (hy) hy.addEventListener('change', refreshHistory);
      if (br) br.addEventListener('click', refreshHistory);
    }

    function resetTypeSelection(){
      currentType = '';
      const exp = document.getElementById('btnExp');
      const inc = document.getElementById('btnInc');
      const baseClass = 'type-neutral py-4 rounded-2xl font-bold text-sm transition-all flex flex-col items-center gap-1 group';
      exp.className = baseClass;
      inc.className = baseClass;
    }

    function setType(type) {
      currentType = type;
      const exp = document.getElementById('btnExp');
      const inc = document.getElementById('btnInc');
      const baseClass = 'py-4 rounded-2xl font-bold text-sm transition-all flex flex-col items-center gap-1 group ';
      if (type === 'Expense') {
        exp.className = baseClass + 'type-active-exp';
        inc.className = baseClass + 'type-neutral';
      } else {
        exp.className = baseClass + 'type-neutral';
        inc.className = baseClass + 'type-active-inc';
      }
    }

    function resetUserSelection(){
      const u = document.getElementById('userName');
      if (u) u.value = '';
      syncCustomSelectUI('user');
    }

    // --- Data Fetching ---
    async function refreshDashboard() {
      const user = document.getElementById('dashUser').value;
      const year = Number(document.getElementById('dashYear').value);
      const opts = { user, mode: 'monthly', year };
      showLoading('Loading...', 'Updating Dashboard');
      try {
        const res = await apiCall('getDashboardDataV2', opts);
        updateDashboardV2(res);
      } catch (err) {
        alert('‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ' + (err && err.message ? err.message : err));
      } finally {
        hideLoading();
      }
    }

    async function refreshHistory(){
      const user = (document.getElementById('histUser') && document.getElementById('histUser').value) ? document.getElementById('histUser').value : 'All';
      const yearVal = (document.getElementById('histYear') && document.getElementById('histYear').value) ? document.getElementById('histYear').value : new Date().getFullYear();
      const year = Number(yearVal);
      const opts = { user, mode: 'monthly', year };
      showLoading('History', 'Fetching transactions...');
      try {
        const res = await apiCall('getDashboardDataV2', opts);
        if (!res || res.ok === false) throw new Error((res && res.error) ? res.error : '‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');

        let allItems = res.history || [];
        const filteredItems = allItems.filter(item => {
          if (!item.date) return false;
          return String(item.date).includes(String(year));
        });
        __historyCache = filteredItems;
        renderHistory(__historyCache);
      } catch (err) {
        alert('‡πÇ‡∏´‡∏•‡∏î History ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ' + (err && err.message ? err.message : err));
      } finally {
        hideLoading();
      }
    }

    async function deleteHistoryItem(row){
      const rowNum = Number(row || 0);
      if (!rowNum) return;
      const ok = confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°?');
      if (!ok) return;
      showLoading('Deleting', 'Removing item...');
      try{
        const res = await apiCall('deleteData', { row: rowNum });
        if (res && res.ok === false) throw new Error(res.error || '‡∏•‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
        await refreshHistory();
        await refreshDashboard();
      }catch(err){
        alert('‡∏•‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ' + (err && err.message ? err.message : err));
      }finally{
        hideLoading();
      }
    }

    function money(x) {
      const n = Number(x || 0);
      return '‡∏ø ' + n.toLocaleString();
    }

    function updateDashboardV2(res) {
      if (!res || res.ok === false) {
        alert((res && res.error) ? res.error : '‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
        return;
      }
      document.getElementById('kpiNet').innerText = money(res.period.net);
      // Payment Method breakdown (Cash/Digital)
      const cashNet = (res && res.periodMethods && res.periodMethods.cash) ? Number(res.periodMethods.cash.net || 0) : 0;
      const digitalNet = (res && res.periodMethods && res.periodMethods.digital) ? Number(res.periodMethods.digital.net || 0) : 0;
      const elCash = document.getElementById('kpiNetCash');
      const elDigital = document.getElementById('kpiNetDigital');
      if (elCash) elCash.innerText = money(cashNet);
      if (elDigital) elDigital.innerText = money(digitalNet);
      document.getElementById('kpiSavings').innerText = money(res.period.savings);
      document.getElementById('kpiIncome').innerText = money(res.period.income);
document.getElementById('kpiOverallBalance').innerText = money(res.overall.balance);
      document.getElementById('rangeHint').innerText = `Year: ${res.filter.year}`;
      const yStr = String(res.filter.year);
      const yearFilteredHistory = (res.history || []).filter(x => x.date && String(x.date).includes(yStr));

      // ‚úÖ Exclude Savings-category expenses from KPI + BarChart
      const expenseNoSavingsSeries = calculateMonthlyExpenseNoSavings(yearFilteredHistory, res.filter.year);
      const expenseNoSavingsTotal = expenseNoSavingsSeries.reduce((a, b) => a + b, 0);
      document.getElementById('kpiExpense').innerText = money(expenseNoSavingsTotal);

      const currentUser = document.getElementById('dashUser').value;
      const seriesFixed = Object.assign({}, (res.series || {}));
      seriesFixed.expense = expenseNoSavingsSeries;
      renderCharts(seriesFixed, currentUser);


      // ‚úÖ Donut 1: ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°
      const donutData = calculateExpenseDonutData(yearFilteredHistory);
      renderDonutChart(donutData);

      // ‚úÖ Donut 2: ‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ä‡∏ô‡∏¥‡∏î
      const savingsDonutData = calculateSavingsDonutData(yearFilteredHistory);
      renderSavingsDonutChart(savingsDonutData);

      if(res.history) {
        __historyCache = yearFilteredHistory;
        if (__activeTab === 'history') renderHistory(__historyCache);
      }
    }

    // --- Calculation Functions ---
    function calculateTrendLine(data) {
      let lastIndex = data.length - 1;
      while(lastIndex >= 0 && data[lastIndex] === 0) lastIndex--;
      if (lastIndex < 1) return Array(12).fill(null);

      let x = [], y = [];
      for (let i = 0; i <= lastIndex; i++) { x.push(i); y.push(data[i]); }

      let n = x.length, sumX = 0, sumY = 0, sumXY = 0, sumXX = 0;
      for (let i = 0; i < n; i++) {
        sumX += x[i]; sumY += y[i]; sumXY += x[i]*y[i]; sumXX += x[i]*x[i];
      }
      let slope = (n*sumXY - sumX*sumY) / (n*sumXX - sumX*sumX);
      let intercept = (sumY - slope*sumX) / n;

      let trendData = [];
      for (let i = 0; i < 12; i++) trendData.push(slope*i + intercept);
      return trendData;
    }

    // ‚úÖ Monthly expense series excluding Savings categories (for BarChart + KPI Expense)
    function calculateMonthlyExpenseNoSavings(historyItems, year) {
      const out = Array(12).fill(0);
      (historyItems || []).forEach(item => {
        const t = (item.type || '').toString().trim();
        if (t !== '‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢') return;

        const cat = (item.category || '').toString().trim();
        if (isSavingsCategory(cat)) return;

        const mi = __getMonthIndexFromAny(item.date);
        if (mi == null || mi < 0 || mi > 11) return;

        let rawAmt = item.amt;
        if (typeof rawAmt === 'string') rawAmt = rawAmt.replace(/,/g, '');
        const amt = parseFloat(rawAmt) || 0;
        out[mi] += amt;
      });
      return out;
    }

    // Robust month parsing for supported date formats
    function __getMonthIndexFromAny(dateStr) {
      if (!dateStr) return null;
      const s = String(dateStr).trim();

      // ISO: YYYY-MM-DD
      if (/^[0-9]{4}-[0-9]{2}-[0-9]{2}/.test(s)) {
        const m = parseInt(s.slice(5, 7), 10);
        return isNaN(m) ? null : (m - 1);
      }

      // Common: DD/MM/YYYY or D/M/YYYY
      if (s.includes('/')) {
        const parts = s.split('/');
        if (parts.length >= 2) {
          const m = parseInt(parts[1], 10);
          return isNaN(m) ? null : (m - 1);
        }
      }

      // Fallback: Date parsing
      const d = new Date(s);
      if (!isNaN(d.getTime())) return d.getMonth();
      return null;
    }

    // ‚úÖ Donut ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö "‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢" ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°
    function calculateExpenseDonutData(historyItems) {
      const totals = {};
      historyItems.forEach(item => {
        const t = (item.type || '').toString().trim();
        if (t !== '‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢') return;

        const cat = (item.category || '‡∏≠‡∏∑‡πà‡∏ô‡πÜ').toString().trim();
        if (isSavingsCategory(cat)) return; // ‡∏ï‡∏±‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡∏≠‡∏≠‡∏Å

        let rawAmt = item.amt;
        if (typeof rawAmt === 'string') rawAmt = rawAmt.replace(/,/g, '');
        const amt = parseFloat(rawAmt) || 0;
        if (!totals[cat]) totals[cat] = 0;
        totals[cat] += amt;
      });
      return totals;
    }

    // ‚úÖ Donut ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö "‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°" ‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏ä‡∏ô‡∏¥‡∏î (‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å type ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°)
    function calculateSavingsDonutData(historyItems) {
      const totals = {};
      historyItems.forEach(item => {
        const cat = (item.category || '').toString().trim();
        if (!isSavingsCategory(cat)) return;

        let rawAmt = item.amt;
        if (typeof rawAmt === 'string') rawAmt = rawAmt.replace(/,/g, '');
        const amt = Math.abs(parseFloat(rawAmt) || 0);
        if (!totals[cat]) totals[cat] = 0;
        totals[cat] += amt;
      });
      return totals;
    }

    // ===========================================
    // BLUE GRADIENT THEME (Charts)
    // ===========================================
    function _blueStops() {
      return [
        '#0b3b9e', '#0d4ac2', '#0f5fe0', '#1673ff',
        '#1b86ff', '#2a9cff', '#34b3ff', '#4cc8ff',
        '#67d9ff', '#86e6ff', '#a5f0ff', '#c3f7ff'
      ];
    }

    function _makeLinearBlue(ctx, area, a1 = 0.95, a2 = 0.25, dir = 'v') {
      const g = (dir === 'h')
        ? ctx.createLinearGradient(area.left, 0, area.right, 0)
        : ctx.createLinearGradient(0, area.top, 0, area.bottom);

      g.addColorStop(0, `rgba(37, 99, 235, ${a1})`);
      g.addColorStop(0.55, `rgba(29, 78, 216, ${(a1 + a2) / 2})`);
      g.addColorStop(1, `rgba(14, 165, 233, ${a2})`);
      return g;
    }

    function _makeLinearBlueSoft(ctx, area, a1 = 0.35, a2 = 0.02) {
      const g = ctx.createLinearGradient(0, area.top, 0, area.bottom);
      g.addColorStop(0, `rgba(37, 99, 235, ${a1})`);
      g.addColorStop(1, `rgba(37, 99, 235, ${a2})`);
      return g;
    }

    // --- Chart Rendering (Chart.js) ---
    function renderCharts(series, currentUser) {
      const labels = MONTH_LABELS.slice();
      const income = series.income || [];
      const expense = series.expense || [];
      const savings = series.savings || [];

      if (barChart) barChart.destroy();
      if (lineChart) lineChart.destroy();

      const fontConfig = { family: "'Kanit', sans-serif", size: 10 };
      const commonOptions = {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { display: false },
          tooltip: {
            backgroundColor: 'rgba(15, 23, 42, 0.92)',
            padding: 10,
            titleFont: { family: "'Kanit', sans-serif" },
            bodyFont: { family: "'Kanit', sans-serif" },
            cornerRadius: 8,
            displayColors: false
          }
        },
        scales: {
          x: { ticks: { font: fontConfig, color: '#94a3b8' }, grid: { display: false } },
          y: {
            beginAtZero: true,
            ticks: { font: fontConfig, color: '#94a3b8', maxTicksLimit: 5 },
            grid: { color: 'rgba(148, 163, 184, 0.15)', drawBorder: false }
          }
        }
      };

      const barIncomeBg = (context) => {
        const chart = context.chart;
        const { ctx, chartArea } = chart;
        if (!chartArea) return 'rgba(37, 99, 235, 0.85)';
        return _makeLinearBlue(ctx, chartArea, 0.95, 0.25, 'v');
      };

      const barExpenseBg = (context) => {
        const chart = context.chart;
        const { ctx, chartArea } = chart;
        if (!chartArea) return 'rgba(244, 63, 94, 0.78)';
        const g = ctx.createLinearGradient(0, chartArea.top, 0, chartArea.bottom);
        g.addColorStop(0, 'rgba(244, 63, 94, 0.90)');
        g.addColorStop(1, 'rgba(244, 63, 94, 0.22)');
        return g;
      };

      const barSavingsBg = (context) => {
        const chart = context.chart;
        const { ctx, chartArea } = chart;
        if (!chartArea) return 'rgba(34, 197, 94, 0.72)';
        const g = ctx.createLinearGradient(0, chartArea.top, 0, chartArea.bottom);
        g.addColorStop(0, 'rgba(34, 197, 94, 0.85)');
        g.addColorStop(1, 'rgba(34, 197, 94, 0.22)');
        return g;
      };

      barChart = new Chart(document.getElementById('barStack'), {
        type: 'bar',
        data: {
          labels,
          datasets: [
            { label: 'Income', data: income, backgroundColor: barIncomeBg, borderRadius: 6, borderWidth: 0 },
            { label: 'Std. Expense', data: expense, backgroundColor: barExpenseBg, borderRadius: 6, borderWidth: 0 },
            { label: 'Saving Expenses', data: savings, backgroundColor: barSavingsBg, borderRadius: 6, borderWidth: 0 }
          ]
        },
        options: {
          ...commonOptions,
          scales: {
            ...commonOptions.scales,
            x: { ...commonOptions.scales.x, stacked: true },
            y: { ...commonOptions.scales.y, stacked: true }
          }
        }
      });

      let targetValue = 0;
      if (currentUser === 'Nine') targetValue = targetNine;
      else if (currentUser === 'Bow') targetValue = targetBow;
      else targetValue = targetNine + targetBow;

      const targetData = labels.map(() => targetValue);
      const trendData = calculateTrendLine(savings);

      let lastSaveIndex = savings.length - 1;
      while (lastSaveIndex >= 0 && savings[lastSaveIndex] === 0) lastSaveIndex--;

      const emojiEl = document.getElementById('trendEmoji');
      if (targetValue > 0 && lastSaveIndex >= 0) {
        const currentSaving = savings[lastSaveIndex];
        if (currentSaving >= targetValue) {
          emojiEl.innerHTML = '<i class="fa-regular fa-face-smile text-emerald-500 text-lg"></i>';
        } else {
          emojiEl.innerHTML = '<i class="fa-regular fa-face-frown text-rose-500 text-lg"></i>';
        }
      } else {
        emojiEl.innerHTML = '';
      }

      const savingsFill = (context) => {
        const chart = context.chart;
        const { ctx, chartArea } = chart;
        if (!chartArea) return 'rgba(37, 99, 235, 0.15)';
        return _makeLinearBlueSoft(ctx, chartArea, 0.25, 0.02);
      };

      lineChart = new Chart(document.getElementById('lineChart'), {
        type: 'line',
        data: {
          labels,
          datasets: [
            {
              label: 'Savings',
              data: savings,
              tension: 0.4,
              borderColor: 'rgba(37, 99, 235, 0.95)',
              borderWidth: 2,
              backgroundColor: savingsFill,
              pointBackgroundColor: '#ffffff',
              pointBorderColor: 'rgba(37, 99, 235, 0.95)',
              pointBorderWidth: 2,
              pointRadius: 3,
              fill: true
            },
            {
              label: 'Min Goal',
              data: targetData,
              borderColor: 'rgba(34, 197, 94, 1)', // #22c55e
              borderWidth: 2,
              borderDash: [6, 6],
              pointRadius: 0,
              fill: false,
              tension: 0
            },
            {
              label: 'Trend',
              data: trendData,
              borderColor: 'rgba(14, 165, 233, 0.70)',
              borderWidth: 2,
              borderDash: [2, 4],
              pointRadius: 0,
              fill: false,
              tension: 0
            }
          ]
        },
        options: commonOptions
      });
    }

function renderDonutChart(dataObj) {
    const labels = Object.keys(dataObj);
    const data = Object.values(dataObj);
    const total = data.reduce((a, b) => a + b, 0);

    const canvas = document.getElementById('donutChart');
    if (donutChart) donutChart.destroy();
    if (!canvas || data.length === 0) return;

    const colors = _expensePinkToRedStops();

    donutChart = new Chart(canvas, {
      type: 'doughnut',
      data: {
        labels: labels,
        datasets: [{
          data: data,
          backgroundColor: labels.map((_, i) => colors[i % colors.length]),
          borderWidth: 0,
          hoverOffset: 10
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        layout: { padding: { top: 10, bottom: 10 } },
        plugins: {
          legend: {
            position: 'right',
            labels: {
              font: { family: "'Kanit', sans-serif", size: 10 },
              boxWidth: 10,
              padding: 15,
              color: 'rgba(203, 213, 225, 0.88)'
            }
          },
          tooltip: {
            backgroundColor: 'rgba(15, 23, 42, 0.92)',
            padding: 12,
            titleFont: { family: "'Kanit', sans-serif", size: 13 },
            bodyFont: { family: "'Kanit', sans-serif", size: 12 },
            cornerRadius: 10,
            callbacks: {
              label: function(context) {
                const label = context.label || '';
                const value = context.raw || 0;
                const pct = total > 0 ? ((value / total) * 100).toFixed(1) + '%' : '0%';
                return ` ${label}: ‡∏ø${Number(value).toLocaleString()} (${pct})`;
              }
            }
          }
        }
      }
    });
  }

  // ‚úÖ Replace ‡πÄ‡∏î‡∏¥‡∏°: Savings By Type donut (‡∏ü‡πâ‡∏≤‡∏≠‡πà‡∏≠‡∏ô -> ‡∏ü‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏°)
  function renderSavingsDonutChart(dataObj) {
    const labels = Object.keys(dataObj);
    const data = Object.values(dataObj);
    const total = data.reduce((a, b) => a + b, 0);

    const canvas = document.getElementById('savingsDonutChart');
    if (!canvas) return;

    if (savingsDonutChart) savingsDonutChart.destroy();
    if (data.length === 0) return;

    const colors = _savingsLightBlueToDeepStops();

    savingsDonutChart = new Chart(canvas, {
      type: 'doughnut',
      data: {
        labels: labels,
        datasets: [{
          data: data,
          backgroundColor: labels.map((_, i) => colors[i % colors.length]),
          borderWidth: 0,
          hoverOffset: 10
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        layout: { padding: { top: 10, bottom: 10 } },
        plugins: {
          legend: {
            position: 'right',
            labels: {
              font: { family: "'Kanit', sans-serif", size: 10 },
              boxWidth: 10,
              padding: 15,
              color: 'rgba(203, 213, 225, 0.88)'
            }
          },
          tooltip: {
            backgroundColor: 'rgba(15, 23, 42, 0.92)',
            padding: 12,
            titleFont: { family: "'Kanit', sans-serif", size: 13 },
            bodyFont: { family: "'Kanit', sans-serif", size: 12 },
            cornerRadius: 10,
            callbacks: {
              label: function(context) {
                const label = context.label || '';
                const value = context.raw || 0;
                const pct = total > 0 ? ((value / total) * 100).toFixed(1) + '%' : '0%';
                return ` ${label}: ‡∏ø${Number(value).toLocaleString()} (${pct})`;
              }
            }
          }
        }
      }
    });
  }
        function renderHistory(items) {
      const sortedItems = items.slice().sort((a, b) => Number(b.row) - Number(a.row));

      let html = '';
      sortedItems.forEach((item) => {
        const isIncome = item.type === '‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö';
        const amtColor = isIncome ? 'text-emerald-600' : 'text-rose-600';
        const iconBg = isIncome ? 'bg-emerald-100 text-emerald-600 border border-emerald-200/60' : 'bg-rose-100 text-rose-600 border border-rose-200/60';
        const sign = isIncome ? '+' : '-';

        let catIcon = '<i class="fa-solid fa-tag"></i>';
        const c = String(item.category || '');
        if(c.includes('‡∏≠‡∏≤‡∏´‡∏≤‡∏£')) catIcon = '<i class="fa-solid fa-utensils"></i>';
        else if(c.includes('‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á')) catIcon = '<i class="fa-solid fa-gas-pump"></i>';
        else if(c.includes('‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å')) catIcon = '<i class="fa-solid fa-house"></i>';
        else if(c.includes('‡∏ä‡πâ‡∏≠‡∏õ‡∏õ‡∏¥‡πâ‡∏á')) catIcon = '<i class="fa-solid fa-bag-shopping"></i>';
        else if(c.includes('‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÅ‡∏ö‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡∏£‡∏≤‡πÑ‡∏ó‡∏¢ THB')) catIcon = '<i class="fa-solid fa-piggy-bank"></i>';
        else if(c.includes('‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡πÅ‡∏ö‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡∏£‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® USD')) catIcon = '<i class="fa-solid fa-dollar-sign"></i>';
        else if(c.includes('‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏∞‡∏™‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå')) catIcon = '<i class="fa-solid fa-shield-halved"></i>';
        else if(c.includes('‡∏≠‡∏≠‡∏°‡∏ó‡∏≠‡∏á')) catIcon = '<i class="fa-solid fa-coins"></i>';
        else if(c.includes('‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö')) catIcon = '<i class="fa-solid fa-money-bill-wave"></i>';

        const rowNum = Number(item.row || 0);
        const canDelete = rowNum > 0;
        const deleteBtn = canDelete
          ? `<button onclick="deleteHistoryItem(${rowNum})" class="w-11 h-11 rounded-full bg-rose-50 text-rose-500 border border-rose-100 shadow-sm flex items-center justify-center transition-all active:scale-90 hover:bg-rose-100 ml-2"><i class="fa-solid fa-trash-can text-lg"></i></button>` : ``;

        html += `
          <div class="bg-white/92 backdrop-blur p-4 rounded-[1.5rem] flex items-center justify-between shadow-sm border border-slate-100 card-hover">
            <div class="flex items-center gap-3 flex-1 min-w-0">
              <div class="w-11 h-11 min-w-[44px] rounded-2xl ${iconBg} flex items-center justify-center text-lg self-start">
                ${catIcon}
              </div>
              <div class="overflow-hidden flex-1">
                <p class="font-bold text-slate-800 text-sm leading-tight truncate pr-2">${escapeHtml(item.category)}</p>
                <div class="flex items-start gap-2 text-[11px] text-slate-400 mt-1">
                  <span class="bg-white/70 border border-slate-200 px-1.5 py-0.5 rounded text-slate-600 font-semibold whitespace-nowrap h-fit mt-0.5">${escapeHtml(item.user)}</span>
                  <span class="break-words whitespace-normal leading-tight flex-1">${escapeHtml(item.desc || '-')}</span>
                </div>
              </div>
            </div>
            <div class="flex items-center pl-2 self-start mt-1">
              <div class="text-right mr-1">
                <p class="font-bold ${amtColor} text-base whitespace-nowrap">${sign}${escapeHtml(item.amt)}</p>
                <span class="text-[10px] text-slate-300 block">${escapeHtml(item.date)}</span>
              </div>
              ${deleteBtn}
            </div>
          </div>`;
      });

      document.getElementById('history-list').innerHTML = html ||
        `<div class="flex flex-col items-center justify-center py-12 text-slate-300">
           <i class="fa-regular fa-folder-open text-4xl mb-2"></i>
           <p class="text-xs">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏õ‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</p>
         </div>`;
    }

    function escapeHtml(str) {
      return String(str).replace(/[&<>"']/g, (m) => ({ '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;' }[m]));
    }

    function resetInputs() {
      document.getElementById('desc').value = '';
      document.getElementById('amt').value = '';
      const pm = document.getElementById('payMethod'); if (pm) { pm.value = ''; try { syncCustomSelectUI('payMethod'); } catch(e) {} }
      resetCustomDropdown();
      resetTypeSelection();
      resetUserSelection();
      initDateDefaultToday();
    }

    async function saveData() {
      const btn = document.getElementById('saveBtn');
      const userVal = document.getElementById('userName').value;
      if (!userVal) return alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å User ‡∏Å‡πà‡∏≠‡∏ô‡∏à‡πâ‡∏≤');
      if (!currentType) return alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏à‡πâ‡∏≤');
      const cateVal = document.getElementById('cate').value;
            const pmVal = (document.getElementById('payMethod') ? document.getElementById('payMethod').value : '');
      if (!pmVal) return alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏Å‡πà‡∏≠‡∏ô‡∏à‡πâ‡∏≤');
      if (!cateVal) return alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏Å‡πà‡∏≠‡∏ô‡∏à‡πâ‡∏≤');

const dateVal = document.getElementById('txDate').value || ymdLocal(new Date());

      const payload = {
        entryDate: dateVal,
        userName: userVal,
        paymentMethod: pmVal,
        type: currentType === 'Expense' ? '‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢' : '‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö',
        category: cateVal,
        description: (document.getElementById('desc').value || '').trim(),
        amount: document.getElementById('amt').value
      };
      if (!payload.amount) return alert('‡∏Å‡∏£‡∏≠‡∏Å ‚Äú‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‚Äù ‡∏Å‡πà‡∏≠‡∏ô‡∏à‡πâ‡∏≤');

      showLoading('Saving', 'Writing data...');
      btn.disabled = true;
      try {
        const res = await apiCall('addData', payload);
        updateDashboardV2(res);
        switchTab('dashboard');
        resetInputs();
      } catch (err) {
        alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ' + (err && err.message ? err.message : err));
      } finally {
        hideLoading();
        btn.disabled = false;
      }
    }
  </script>
  <!-- Input Runner Mascot (UI only) -->
  <style id="inputRunnerStyle">
    #inputRunner{
      position: fixed;
      left: 50%;
      top: 50%;
      bottom: auto;
      width: 240px;
      height: auto;
      z-index: 9999;
      pointer-events: none;
      opacity: 0;
      will-change: transform, opacity;
      display: none;
      transform: translate(-50%, -50%);
    }
    #inputRunner.show,
    #inputRunner.is-running{
      display: block;
      animation: inputRunnerDash 2.7s ease-in-out forwards;
    }
    #inputRunner img{
      width: 100%;
      height: auto;
      display: block;
      filter: drop-shadow(0 16px 30px rgba(0,0,0,.35));
      user-select: none;
      -webkit-user-drag: none;
    }
    @keyframes inputRunnerDash{
      0%   { opacity: 0; transform: translate(-50%, -50%) translateX(-420px) translateY(0) scale(.95); }
      18%  { opacity: 1; transform: translate(-50%, -50%) translateX(0) translateY(0) scale(1); }
      75%  { opacity: 1; transform: translate(-50%, -50%) translateX(0) translateY(-6px) scale(1); }
      82%  { opacity: 1; transform: translate(-50%, -50%) translateX(0) translateY(0) scale(1); }
      100% { opacity: 0; transform: translate(-50%, -50%) translateX(420px) translateY(0) scale(.98); }
    }
      12%  { opacity: 1; transform: translateX(300px) translateY(0) scale(1); }
      55%  { opacity: 1; transform: translateX(330px) translateY(-6px) scale(1); }
      70%  { opacity: 1; transform: translateX(330px) translateY(0) scale(1); }
      100% { opacity: 0; transform: translateX(420px) translateY(0) scale(.98); }
    }
  </style>

  <div id="inputRunner" aria-hidden="true">
    <img alt="" src="data:image/png;base64,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" />
  </div>

  <script id="inputRunnerScript">
    (function(){
      function playInputRunner(){
        var el = document.getElementById('inputRunner');
        if(!el) return;
        // reset
        el.classList.remove('show');
        el.style.display = 'none';
        // force reflow
        void el.offsetWidth;
        el.style.display = 'block';
        el.classList.add('show');
        // cleanup after animation
        window.clearTimeout(el.__t);
        el.__t = window.setTimeout(function(){
          el.classList.remove('show');
          el.style.display = 'none';
        }, 2800);
      }

      // Patch switchTab to trigger only when entering Input
      if(typeof window.switchTab === 'function' && !window.__inputRunnerPatched){
        window.__inputRunnerPatched = true;
        var _orig = window.switchTab;
        window.switchTab = function(tabName){
          var r = _orig.apply(this, arguments);
          try{
            if(String(tabName).toLowerCase() === 'input') playInputRunner();
          }catch(e){}
          return r;
        };
      }

      // Also: if app starts on Input tab, play once after load
      window.addEventListener('load', function(){
        try{
          var active = document.querySelector('.tab-active, [data-tab].active');
          // If we can't reliably detect, do nothing. SwitchTab patch will handle user navigation.
        }catch(e){}
      });

      window.playInputRunner = playInputRunner;
    })();
  </script>

</body>
</html>
